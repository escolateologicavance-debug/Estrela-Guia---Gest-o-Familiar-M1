<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Avalia√ß√£o Final - Estrela Guia</title>
<script src="https://unpkg.com/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>

<style>
body{
    font-family: Arial, sans-serif;
    background:#eef5ff;
    padding:10px;
}
.container{
    max-width:800px;
    margin:auto;
    background:white;
    padding:20px;
    border-radius:10px;
    box-shadow:0 0 15px rgba(0,0,0,0.1);
}
.question{
    margin-bottom:15px;
    border-bottom:1px solid #eee;
    padding-bottom:10px;
}
button{
    width:100%;
    padding:15px;
    border:none;
    border-radius:6px;
    margin-top:10px;
    font-size:16px;
    cursor:pointer;
    font-weight:bold;
}
.finalizar{ background:#1f3c88; color:white; }
.btn-gerar{ background:#0a58ca; color:white; }

.result{
    margin-top:20px;
    padding:15px;
    border-radius:8px;
    text-align:center;
    font-weight:bold;
}
.aprovado{ background:#d4edda; color:#155724; }
.reprovado{ background:#f8d7da; color:#721c24; }

input[type="text"]{
    width:100%;
    padding:12px;
    margin:10px 0;
    border:2px solid #0a58ca;
    border-radius:6px;
}
</style>
</head>

<body>

<div class="container">
<h1>Avalia√ß√£o Final - Gest√£o Familiar</h1>
<form id="quizForm"></form>
<button class="finalizar" onclick="corrigir()">Finalizar Avalia√ß√£o</button>

<div id="resultado"></div>

<div id="bloco-certificado" style="display:none; margin-top:20px; text-align:center;">
    <h3 style="color:#1f3c88;">Aprovado! üèÜ</h3>
    <p>Digite seu nome completo:</p>
    <input type="text" id="nomeCompleto" placeholder="Nome Completo">
    <button class="btn-gerar" onclick="baixarCertificado()">BAIXAR CERTIFICADO EM PDF</button>
</div>

<div id="area-certificado" style="
display:none;
width:1122px;
height:794px;
background:linear-gradient(135deg,#dbe9ff,#bcd8ff);
padding:60px;
box-sizing:border-box;
">

<div style="
background:white;
height:100%;
border:12px solid #1f3c88;
padding:60px;
text-align:center;
">

<h1 style="font-size:50px;color:#1f3c88;margin:0;">Estrela Guia</h1>
<h2 style="color:#0a58ca;letter-spacing:3px;">CERTIFICADO DE CONCLUS√ÉO</h2>

<p style="font-size:22px;margin-top:40px;">Certificamos que</p>

<h2 id="pdf-nome" style="
font-size:36px;
color:#1f3c88;
border-bottom:2px solid #0a58ca;
display:inline-block;
padding:10px 20px;
"></h2>

<p style="font-size:20px;margin-top:30px;">
Concluiu com aproveitamento o Curso de<br>
<strong>Gest√£o Familiar - M√≥dulos 1 a 5</strong>
</p>

<p style="margin-top:40px;font-size:18px;">
Itanhang√°-MT, <span id="pdf-data"></span>
</p>

<p style="margin-top:50px;font-size:12px;color:#555;">
Certificado v√°lido em todo territ√≥rio nacional<br>
(Base Legal: Lei n¬∫ 9.394/96)
</p>

</div>
</div>
</div>

<script>

const perguntas = [

{tipo:"vf", pergunta:"A base da gest√£o familiar come√ßa pelo autoconhecimento.", correta:"V"},
{tipo:"mc", pergunta:"No M√≥dulo 1, autoconhecimento ajuda a:", opcoes:["Melhorar decis√µes","Controlar outros","Evitar di√°logo","Ignorar erros"], correta:0},

{tipo:"vf", pergunta:"Comunica√ß√£o eficaz exige escuta ativa.", correta:"V"},
{tipo:"mc", pergunta:"No M√≥dulo 2, conflito saud√°vel significa:", opcoes:["Di√°logo respeitoso","Sil√™ncio constante","Autoritarismo","Afastamento"], correta:0},

{tipo:"vf", pergunta:"Planejamento financeiro reduz tens√µes familiares.", correta:"V"},
{tipo:"mc", pergunta:"No M√≥dulo 3, lideran√ßa equilibrada envolve:", opcoes:["Exemplo e responsabilidade","Medo","Imposi√ß√£o","Rigidez extrema"], correta:0},

{tipo:"vf", pergunta:"Ignorar emo√ß√µes fortalece relacionamentos.", correta:"F"},
{tipo:"mc", pergunta:"Gest√£o emocional permite:", opcoes:["Rea√ß√µes conscientes","Explos√µes frequentes","Nega√ß√£o emocional","Controle externo"], correta:0},

{tipo:"vf", pergunta:"Limites claros aumentam respeito m√∫tuo.", correta:"V"},
{tipo:"mc", pergunta:"Organiza√ß√£o familiar depende de:", opcoes:["Planejamento e rotina","Improvisa√ß√£o constante","Descontrole financeiro","Falta de metas"], correta:0},

{tipo:"vf", pergunta:"Educa√ß√£o financeira n√£o interfere na harmonia familiar.", correta:"F"},
{tipo:"mc", pergunta:"Intelig√™ncia emocional contribui para:", opcoes:["Equil√≠brio","Impulsividade","Frieza","Indiferen√ßa"], correta:0},

{tipo:"vf", pergunta:"Responsabilidade individual impacta o coletivo.", correta:"V"},
{tipo:"mc", pergunta:"No M√≥dulo 4, valores familiares s√£o:", opcoes:["Base da estrutura","Detalhes irrelevantes","Imposi√ß√µes r√≠gidas","Obst√°culos"], correta:0},

{tipo:"vf", pergunta:"Crescimento familiar exige comprometimento cont√≠nuo.", correta:"V"},
{tipo:"mc", pergunta:"No M√≥dulo 5, maturidade emocional envolve:", opcoes:["Autocontrole","Repress√£o","Superioridade","Distanciamento"], correta:0},

{tipo:"vf", pergunta:"Exemplo dos pais influencia comportamento dos filhos.", correta:"V"},
{tipo:"mc", pergunta:"Gest√£o familiar eficaz promove:", opcoes:["Uni√£o e estabilidade","Competi√ß√£o interna","Desorganiza√ß√£o","Indiferen√ßa"], correta:0}

];

function gerarProva(){
    const form=document.getElementById("quizForm");
    perguntas.forEach((q,i)=>{
        let div=document.createElement("div");
        div.className="question";
        div.innerHTML=`<p><b>${i+1}. ${q.pergunta}</b></p>`;
        if(q.tipo==="vf"){
            ["V","F"].forEach(op=>{
                div.innerHTML+=`<label style="display:block;">
                <input type="radio" name="q${i}" value="${op}">
                ${op==="V"?"Verdadeiro":"Falso"}
                </label>`;
            });
        }else{
            q.opcoes.forEach(op=>{
                div.innerHTML+=`<label style="display:block;">
                <input type="radio" name="q${i}" value="${op}">
                ${op}
                </label>`;
            });
        }
        form.appendChild(div);
    });
}
gerarProva();

function corrigir(){
    let total=0;

    perguntas.forEach((q,i)=>{
        let r=document.querySelector(`input[name="q${i}"]:checked`);
        if(r){
            if(q.tipo==="vf" && r.value===q.correta) total++;
            if(q.tipo==="mc" && r.value===q.opcoes[q.correta]) total++;
        }
    });

    let nota=(total/perguntas.length)*10;
    let res=document.getElementById("resultado");

    if(nota>=7){
        res.className="result aprovado";
        res.innerHTML=`Nota: ${nota.toFixed(1)} - Voc√™ foi aprovado! üèÜ`;
        document.getElementById("bloco-certificado").style.display="block";
    }else{
        res.className="result reprovado";
        res.innerHTML=`Nota: ${nota.toFixed(1)} - N√£o atingiu 7.0 üò¢`;
    }
}

function baixarCertificado(){

    const nome=document.getElementById("nomeCompleto").value.trim();
    if(!nome){
        alert("Digite seu nome completo.");
        return;
    }

    document.getElementById("pdf-nome").innerText=nome;
    document.getElementById("pdf-data").innerText=
        new Date().toLocaleDateString("pt-BR");

    const element=document.getElementById("area-certificado");
    element.style.display="block";

    setTimeout(()=>{
        html2pdf(element,{
            margin:0,
            filename:"Certificado_Estrela_Guia.pdf",
            image:{type:"jpeg",quality:0.98},
            html2canvas:{scale:2,useCORS:true},
            jsPDF:{unit:"mm",format:"a4",orientation:"landscape"}
        });

        setTimeout(()=>{
            element.style.display="none";
        },1000);

    },500);
}

</script>
</body>
</html>